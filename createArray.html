<html>
  <head>
    <title>Area Code Parser</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="htmlparser.js"></script>
    <script src="html2json.js"></script>
  </head>
  <body style="padding:20px;">
    <h3>Parse Area Codes From Remote Site - <a href="view-source:http://www.allareacodes.com/area-code-list.htm" target="_blank">http://www.allareacodes.com/area-code-list.htm</a></h3>
    <br />
    <div>
      <textarea class="form-control" id="inputArea" placeholder="Paste source from http://www.allareacodes.com/area-code-list.htm here" rows="3"></textarea>
      <button type="button" class="btn btn-success btnConvert">Get Area Codes</button>
    </div>
    <br/>
    <div>
      <pre id="outputArea"></pre>
    </div>
  </body>
</html>
<script type="text/javascript">
  $('.btnConvert').click(function() {
    var rawHtml = $('#inputArea').val();
    var innerTable = $(rawHtml).find('#main_table').find('table:eq(5)').html();
    var json = html2json(innerTable).child;
    var array = [];
    for (var i = 1; i < json.length; i++) {
      var a = json[i].child[0].text;
      var l1 = json[i].child[1].text.split(': ');
      var l2 = l1.length > 1 ? l1[1].split(', ') : ['None'];
      var o = {
        area_code: a.substr(a.indexOf('<a>')+3, 3),
        state: l1[0],
        cities: l2
      };
      array.push(o);
    }
    $('#outputArea').html(JSON.stringify(array,null,2));
  });
</script>